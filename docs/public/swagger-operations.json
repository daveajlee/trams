{"openapi":"3.0.1","info":{"title":"TraMS Operations API","description":"TraMS Operations is a part of the TraMS Platform which is responsible for day-to-day management of the transport company.","license":{"name":"Apache 2.0","url":"http://www.davelee.de"},"version":"v0.0.1"},"externalDocs":{"description":"TraMS Documentation","url":"https://www.davelee.de/trams/"},"servers":[{"url":"http://localhost:8084","description":"Generated server url"}],"tags":[{"name":"/api/stop"},{"name":"/api/export"},{"name":"/api/stopTimes"},{"name":"/api/routes"},{"name":"/api/vehicles"},{"name":"/api/route"},{"name":"/api/vehicle"},{"name":"/api/stops"},{"name":"/api/upload"}],"paths":{"/api/vehicles/":{"get":{"tags":["/api/vehicles"],"summary":"Get vehicles","description":"Return all vehicles matching company and if supplied fleet number","operationId":"getVehiclesByCompanyAndFleetNumber","parameters":[{"name":"company","in":"query","required":true,"schema":{"type":"string"}},{"name":"fleetNumber","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"204":{"description":"Successful but no vehicles found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/VehiclesResponse"}}}},"200":{"description":"Successfully returned vehicles","content":{"*/*":{"schema":{"$ref":"#/components/schemas/VehiclesResponse"}}}}}},"post":{"tags":["/api/vehicles"],"summary":"Load vehicles","description":"Load all vehicles for a particular company","operationId":"loadVehicles","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoadVehiclesRequest"}}},"required":true},"responses":{"200":{"description":"Successfully loaded vehicles"}}},"delete":{"tags":["/api/vehicles"],"summary":"Delete vehicles","description":"Delete all vehicles","operationId":"deleteVehicles","requestBody":{"content":{"application/json":{"schema":{"type":"string"}}}},"responses":{"200":{"description":"Successfully deleted vehicles"}}}},"/api/vehicle/":{"post":{"tags":["/api/vehicle"],"summary":"Purchase a particular vehicle","description":"Purchase a particular vehicle and return the purchase price","operationId":"purchaseVehicle","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PurchaseVehicleRequest"}}},"required":true},"responses":{"200":{"description":"Successfully purchased vehicles","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PurchaseVehicleResponse"}}}},"409":{"description":"Vehicle conflicted with a vehicle that already exists","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PurchaseVehicleResponse"}}}}}}},"/api/upload/":{"post":{"tags":["/api/upload"],"summary":"Upload Data file","description":"Upload a GTFS or CSV Zip file to TraMS","operationId":"handleFileUpload","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ImportZipRequest"}}}},"responses":{"200":{"description":"Successfully imported GTFS/CSV Data"},"422":{"description":"Entity could not be processed because zip file was not valid"}}}},"/api/stopTimes/generate":{"post":{"tags":["/api/stopTimes"],"summary":"Generate stop times","description":"Generate the stop times for a route and frequency.","operationId":"generateStopTimes","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateStopTimesRequest"}}}},"responses":{"200":{"description":"Successfully returned stop times"}}}},"/api/stop/":{"post":{"tags":["/api/stop"],"summary":"Add stop","description":"Add a stop for this company","operationId":"addStop","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddStopRequest"}}},"required":true},"responses":{"200":{"description":"Successfully add stop"}}}},"/api/route/":{"get":{"tags":["/api/route"],"summary":"Get route","description":"Get a route for this company","operationId":"getRoute","parameters":[{"name":"company","in":"query","required":true,"schema":{"type":"string"}},{"name":"routeNumber","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Successfully returned route","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RouteResponse"}}}}}},"post":{"tags":["/api/route"],"summary":"Add route","description":"Add a route for this company","operationId":"addRoute","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddRouteRequest"}}},"required":true},"responses":{"200":{"description":"Successfully add route"}}},"delete":{"tags":["/api/route"],"summary":"Delete route","description":"Delete a route for this company","operationId":"deleteRoute","parameters":[{"name":"company","in":"query","required":true,"schema":{"type":"string"}},{"name":"routeNumber","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Successfully deleted route"}}}},"/api/vehicle/sell":{"patch":{"tags":["/api/vehicle"],"summary":"Sell a particular vehicle","description":"Sell a particular vehicle and return the money gained from the sale","operationId":"sellVehicle","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SellVehicleRequest"}}},"required":true},"responses":{"200":{"description":"Successfully sold vehicle","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SellVehicleResponse"}}}},"204":{"description":"No vehicle found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SellVehicleResponse"}}}}}}},"/api/vehicle/inspect":{"patch":{"tags":["/api/vehicle"],"summary":"Inspect a particular vehicle","description":"Inspect a particular vehicle and return the cost of the inspection","operationId":"inspectVehicle","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InspectVehicleRequest"}}},"required":true},"responses":{"200":{"description":"Successfully inspected vehicle","content":{"*/*":{"schema":{"$ref":"#/components/schemas/InspectVehicleResponse"}}}},"204":{"description":"No vehicle found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/InspectVehicleResponse"}}}}}}},"/api/vehicle/hours":{"get":{"tags":["/api/vehicle"],"summary":"Retrieve the number of hours for a particular vehicle","description":"Add a number of hours to a specified date for a specified vehicle","operationId":"getHoursForDate","parameters":[{"name":"company","in":"query","required":true,"schema":{"type":"string"}},{"name":"fleetNumber","in":"query","required":true,"schema":{"type":"string"}},{"name":"date","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Successfully retrieved hours","content":{"*/*":{"schema":{"$ref":"#/components/schemas/VehicleHoursResponse"}}}},"204":{"description":"No vehicle found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/VehicleHoursResponse"}}}}}},"patch":{"tags":["/api/vehicle"],"summary":"Add a number of hours to a particular vehicle","description":"Add a number of hours to a specified date for a specified vehicle","operationId":"addHoursForDate","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddVehicleHoursRequest"}}},"required":true},"responses":{"200":{"description":"Successfully added hours"},"204":{"description":"No vehicle found"}}}},"/api/vehicle/history":{"patch":{"tags":["/api/vehicle"],"summary":"Add a new history entry","description":"Add a new history entry for a particular vehicle.","operationId":"addHistoryEntry","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddHistoryEntryRequest"}}},"required":true},"responses":{"200":{"description":"Successfully added history entry"},"204":{"description":"No vehicle found"}}}},"/api/vehicle/delay":{"patch":{"tags":["/api/vehicle"],"summary":"Adjust delay of a particular vehicle","description":"Adjust the delay of a particular vehicle in minutes","operationId":"adjustVehicleDelay","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdjustVehicleDelayRequest"}}},"required":true},"responses":{"200":{"description":"Successfully adjusted delay of vehicle","content":{"*/*":{"schema":{"$ref":"#/components/schemas/VehicleDelayResponse"}}}},"204":{"description":"No vehicle found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/VehicleDelayResponse"}}}}}}},"/api/vehicle/allocate":{"get":{"tags":["/api/vehicle"],"summary":"Return an allocated vehicle","description":"Return a particular vehicle which is allocated to a particular tour","operationId":"getAllocatedVehicle","parameters":[{"name":"company","in":"query","required":true,"schema":{"type":"string"}},{"name":"allocatedTour","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Successfully retrieved vehicle","content":{"*/*":{"schema":{"$ref":"#/components/schemas/VehicleResponse"}}}},"204":{"description":"No vehicle found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/VehicleResponse"}}}}}},"delete":{"tags":["/api/vehicle"],"summary":"Remove a particular allocation","description":"Remove the allocation of a particular vehicle to a particular tour","operationId":"removeVehicleAllocation","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RemoveVehicleRequest"}}},"required":true},"responses":{"200":{"description":"Successfully removed allocation"},"204":{"description":"No vehicle found"}}},"patch":{"tags":["/api/vehicle"],"summary":"Allocate a particular vehicle","description":"Allocate a particular vehicle to a particular tour","operationId":"allocateVehicle","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AllocateVehicleRequest"}}},"required":true},"responses":{"200":{"description":"Successfully allocated vehicle"},"204":{"description":"No vehicle found"}}}},"/api/vehicle/value":{"get":{"tags":["/api/vehicle"],"summary":"Get current value of a particular vehicle","description":"Get current value of a particular vehicle at this date","operationId":"getValue","parameters":[{"name":"company","in":"query","required":true,"schema":{"type":"string"}},{"name":"fleetNumber","in":"query","required":true,"schema":{"type":"string"}},{"name":"date","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Successfully calculated value of vehicle","content":{"*/*":{"schema":{"$ref":"#/components/schemas/VehicleValueResponse"}}}},"204":{"description":"No vehicle found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/VehicleValueResponse"}}}}}}},"/api/stops/":{"get":{"tags":["/api/stops"],"summary":"Get stops","description":"Return all stops","operationId":"getStops","parameters":[{"name":"company","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Successfully returned stops","content":{"*/*":{"schema":{"$ref":"#/components/schemas/StopsResponse"}}}}}},"delete":{"tags":["/api/stops"],"summary":"Delete stops","description":"Delete all stops","operationId":"deleteStops","requestBody":{"content":{"application/json":{"schema":{"type":"string"}}}},"responses":{"200":{"description":"Successfully deleted stops"}}}},"/api/stopTimes/":{"get":{"tags":["/api/stopTimes"],"summary":"Get stop times","description":"Return the stop times.","operationId":"getStopTimes","parameters":[{"name":"stopName","in":"query","required":true,"schema":{"type":"string"}},{"name":"company","in":"query","required":true,"schema":{"type":"string"}},{"name":"startingTime","in":"query","required":false,"schema":{"type":"string"}},{"name":"date","in":"query","required":true,"schema":{"type":"string"}},{"name":"endDate","in":"query","required":true,"schema":{"type":"string"}},{"name":"departures","in":"query","required":true,"schema":{"type":"boolean"}},{"name":"arrivals","in":"query","required":true,"schema":{"type":"boolean"}}],"responses":{"200":{"description":"Successfully returned stop times","content":{"*/*":{"schema":{"$ref":"#/components/schemas/StopTimesResponse"}}}}}}},"/api/routes/":{"get":{"tags":["/api/routes"],"summary":"Get routes","description":"Return all routes","operationId":"getRoutesByCompany","parameters":[{"name":"company","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Successfully returned routes","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoutesResponse"}}}},"204":{"description":"Successful but no vehicles found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoutesResponse"}}}}}},"delete":{"tags":["/api/routes"],"summary":"Delete routes","description":"Delete all routes","operationId":"deleteRoutesByCompany","requestBody":{"content":{"application/json":{"schema":{"type":"string"}}}},"responses":{"204":{"description":"Successful but no vehicles found"},"200":{"description":"Successfully deleted routes"}}}},"/api/export/":{"get":{"tags":["/api/export"],"summary":"Export routes and vehicles","description":"Return all routes and vehicles","operationId":"getExport","parameters":[{"name":"company","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Successfully returned data","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExportResponse"}}}},"204":{"description":"Successful but no data found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExportResponse"}}}}}}}},"components":{"schemas":{"LoadVehicleRequest":{"type":"object","properties":{"fleetNumber":{"type":"string"},"company":{"type":"string"},"deliveryDate":{"type":"string"},"inspectionDate":{"type":"string"},"vehicleType":{"type":"string"},"vehicleStatus":{"type":"string"},"seatingCapacity":{"type":"integer","format":"int32"},"standingCapacity":{"type":"integer","format":"int32"},"modelName":{"type":"string"},"livery":{"type":"string"},"allocatedTour":{"type":"string"},"additionalTypeInformationMap":{"type":"object","additionalProperties":{"type":"string"}},"userHistory":{"type":"array","items":{"$ref":"#/components/schemas/VehicleHistoryRequest"}},"timesheet":{"type":"object","additionalProperties":{"type":"integer","format":"int32"}}}},"LoadVehiclesRequest":{"type":"object","properties":{"count":{"type":"integer","format":"int64"},"loadVehicleRequests":{"type":"array","items":{"$ref":"#/components/schemas/LoadVehicleRequest"}}}},"VehicleHistoryRequest":{"type":"object","properties":{"date":{"type":"string"},"vehicleHistoryReason":{"type":"string"},"comment":{"type":"string"}}},"PurchaseVehicleRequest":{"type":"object","properties":{"fleetNumber":{"type":"string"},"company":{"type":"string"},"vehicleType":{"type":"string"},"livery":{"type":"string"},"additionalTypeInformationMap":{"type":"object","additionalProperties":{"type":"string"}},"seatingCapacity":{"type":"integer","format":"int32"},"standingCapacity":{"type":"integer","format":"int32"},"modelName":{"type":"string"}}},"PurchaseVehicleResponse":{"type":"object","properties":{"purchased":{"type":"boolean"},"purchasePrice":{"type":"number","format":"double"}}},"ImportZipRequest":{"type":"object","properties":{"zipFile":{"type":"string","format":"binary"},"routesToImport":{"type":"string"},"fileFormat":{"type":"string"},"validFromDate":{"type":"string"},"validToDate":{"type":"string"}}},"GenerateStopTimesRequest":{"type":"object","properties":{"company":{"type":"string"},"stopPatternRequest":{"$ref":"#/components/schemas/StopPatternRequest"},"routeNumber":{"type":"string"},"startTime":{"type":"string"},"endTime":{"type":"string"},"frequency":{"type":"integer","format":"int32"},"validFromDate":{"type":"string"},"validToDate":{"type":"string"},"operatingDays":{"type":"string"}}},"StopPatternRequest":{"type":"object","properties":{"stopNames":{"type":"array","items":{"type":"string"}},"distances":{"type":"array","items":{"type":"integer","format":"int32"}},"stoppingTimes":{"type":"array","items":{"type":"integer","format":"int32"}}}},"AddStopRequest":{"type":"object","properties":{"name":{"type":"string"},"company":{"type":"string"},"waitingTime":{"type":"integer","format":"int32"},"distances":{"type":"object","additionalProperties":{"type":"integer","format":"int32"}},"latitude":{"type":"number","format":"double"},"longitude":{"type":"number","format":"double"}}},"AddRouteRequest":{"type":"object","properties":{"routeNumber":{"type":"string"},"company":{"type":"string"}}},"SellVehicleRequest":{"type":"object","properties":{"fleetNumber":{"type":"string"},"company":{"type":"string"}}},"SellVehicleResponse":{"type":"object","properties":{"sold":{"type":"boolean"},"soldPrice":{"type":"number","format":"double"}}},"InspectVehicleRequest":{"type":"object","properties":{"fleetNumber":{"type":"string"},"company":{"type":"string"}}},"InspectVehicleResponse":{"type":"object","properties":{"inspected":{"type":"boolean"},"inspectionPrice":{"type":"number","format":"double"}}},"AddVehicleHoursRequest":{"type":"object","properties":{"company":{"type":"string"},"fleetNumber":{"type":"string"},"date":{"type":"string"},"hours":{"type":"integer","format":"int32"}}},"AddHistoryEntryRequest":{"type":"object","properties":{"company":{"type":"string"},"fleetNumber":{"type":"string"},"date":{"type":"string"},"reason":{"type":"string"},"comment":{"type":"string"}}},"AdjustVehicleDelayRequest":{"type":"object","properties":{"company":{"type":"string"},"fleetNumber":{"type":"string"},"delayInMinutes":{"type":"integer","format":"int32"}}},"VehicleDelayResponse":{"type":"object","properties":{"company":{"type":"string"},"fleetNumber":{"type":"string"},"delayInMinutes":{"type":"integer","format":"int32"}}},"AllocateVehicleRequest":{"type":"object","properties":{"fleetNumber":{"type":"string"},"company":{"type":"string"},"allocatedTour":{"type":"string"}}},"VehicleHistoryResponse":{"type":"object","properties":{"date":{"type":"string"},"vehicleHistoryReason":{"type":"string"},"comment":{"type":"string"}}},"VehicleResponse":{"type":"object","properties":{"fleetNumber":{"type":"string"},"company":{"type":"string"},"deliveryDate":{"type":"string"},"inspectionDate":{"type":"string"},"vehicleType":{"type":"string"},"purchasePrice":{"type":"number","format":"double"},"vehicleStatus":{"type":"string"},"seatingCapacity":{"type":"integer","format":"int32"},"standingCapacity":{"type":"integer","format":"int32"},"modelName":{"type":"string"},"livery":{"type":"string"},"allocatedTour":{"type":"string"},"delayInMinutes":{"type":"integer","format":"int32"},"inspectionStatus":{"type":"string"},"nextInspectionDueInDays":{"type":"integer","format":"int64"},"additionalTypeInformationMap":{"type":"object","additionalProperties":{"type":"string"}},"userHistory":{"type":"array","items":{"$ref":"#/components/schemas/VehicleHistoryResponse"}},"timesheet":{"type":"object","additionalProperties":{"type":"integer","format":"int32"}}}},"VehiclesResponse":{"type":"object","properties":{"count":{"type":"integer","format":"int64"},"vehicleResponses":{"type":"array","items":{"$ref":"#/components/schemas/VehicleResponse"}}}},"VehicleValueResponse":{"type":"object","properties":{"company":{"type":"string"},"fleetNumber":{"type":"string"},"value":{"type":"number","format":"double"}}},"VehicleHoursResponse":{"type":"object","properties":{"numberOfHoursSoFar":{"type":"integer","format":"int32"},"numberOfHoursAvailable":{"type":"integer","format":"int32"},"maximumHoursReached":{"type":"boolean"}}},"StopResponse":{"type":"object","properties":{"name":{"type":"string"},"company":{"type":"string"},"waitingTime":{"type":"integer","format":"int32"},"distances":{"type":"object","additionalProperties":{"type":"integer","format":"int32"}},"latitude":{"type":"number","format":"double"},"longitude":{"type":"number","format":"double"}}},"StopsResponse":{"type":"object","properties":{"count":{"type":"integer","format":"int64"},"stopResponses":{"type":"array","items":{"$ref":"#/components/schemas/StopResponse"}}}},"StopTimeResponse":{"type":"object","properties":{"stopName":{"type":"string"},"company":{"type":"string"},"arrivalTime":{"type":"string"},"departureTime":{"type":"string"},"destination":{"type":"string"},"routeNumber":{"type":"string"},"validFromDate":{"type":"string"},"validToDate":{"type":"string"},"operatingDays":{"type":"array","items":{"type":"string"}},"journeyNumber":{"type":"string"}}},"StopTimesResponse":{"type":"object","properties":{"count":{"type":"integer","format":"int64"},"stopTimeResponses":{"type":"array","items":{"$ref":"#/components/schemas/StopTimeResponse"}}}},"RouteResponse":{"type":"object","properties":{"routeNumber":{"type":"string"},"company":{"type":"string"}}},"RoutesResponse":{"type":"object","properties":{"count":{"type":"integer","format":"int64"},"routeResponses":{"type":"array","items":{"$ref":"#/components/schemas/RouteResponse"}}}},"ExportResponse":{"type":"object","properties":{"routeResponses":{"type":"array","items":{"$ref":"#/components/schemas/RouteResponse"}},"vehicleResponses":{"type":"array","items":{"$ref":"#/components/schemas/VehicleResponse"}}}},"RemoveVehicleRequest":{"type":"object","properties":{"fleetNumber":{"type":"string"},"company":{"type":"string"}}}}}}
